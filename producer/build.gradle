def sharedFile = project.layout.buildDirectory.file("some-subdir/shared-file.txt")

def makeFile = tasks.register("makeFile") {
    outputs.file(sharedFile)
    doFirst {
        sharedFile.get().asFile << "This file is shared across Gradle subprojects."
    }
}

configurations {
    sharedConfiguration {
        canBeConsumed = true
        canBeResolved = false
    }
}

artifacts {
    sharedConfiguration(makeFile)
}
